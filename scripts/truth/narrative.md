# BRAINOPS AI OS - ABSOLUTE POWER MEMORY
## Claude Opus 4.6 | {{SNAPSHOT_DATE}} | {{VERSION}}
<!-- GENERATED: Do not edit live metrics below. Run: scripts/truth/generate-memory.sh -->
<!-- NARRATIVE_VERSION: 1.0.0 -->

---

## THE MISSION
**Build the world's first real AI Operating System.** Dependable, reliable operational AI.
Not a chatbot. Not a wrapper. A living, self-healing multi-AI orchestration platform.
Goal: Industry leadership. The trusted brand name for operational AI.

## ABSOLUTE POWER DIRECTIVES
1. **OPUS EVERYWHERE**: ALL subagents, Task agents use `model: "opus"`.
2. **200 OK MEANS NOTHING**: Verify actual content, data, behavior. Not just status codes.
3. **NO LOSING WORK**: Persistent memory, brain store, task manager, topic files.
4. **VERIFY BEFORE REPORTING**: Chrome for UI, curl+jq for APIs, SQL for DB, git log for code.
5. **NO ASSUMPTIONS**: Query live systems. No hardcoded state. No stale numbers.
6. **FULL AUTHORITY**: Enhance/optimize autonomously if no additional cost. Costs need approval.
7. **KNOW ALL SYSTEMS**: Never forget a deployed project. 10 systems, not 7.
8. **PERMANENT FIXES ONLY**: No band-aids. Fix root causes. Verify in production. No regressions.
9. **BUILDOUT MODE**: Do NOT delete empty DB tables. We may need them. Keep everything.
10. **MINIMIZE CONTEXT BLOAT**: Delegate to subagents. Keep main session lean for long runs.

## CRITICAL RULES (EVERY SESSION)
1. NEVER use hardcoded state - ALWAYS query live
2. Revenue is UNKNOWN until queried - $0 as of 2026-02-10
3. Demo data != revenue - check `is_demo` flag
4. Verify in PRODUCTION - not just 200 OK
5. No back and forth - research fully before acting
6. OPUS EVERYWHERE - all subagents use Opus

## DEEP MEMORY (topic files)
- `infrastructure.md` - Env vars, Render/Vercel, service IDs, secrets
- `integrations.md` - Gemini Live, Keep, GAS, task manager, Stripe, Gumroad
- `broken-items.md` - Audit findings + fix history (P0s ALL FIXED, LIVE issues logged)
- `all-systems.md` - Complete 10-system inventory + untracked repos
- `agentic-ai-enhancement.md` - Production-grade AI patterns (PHASES 1-4 COMPLETE)
- `weathercraft-erp.md` - ERP state: Phase 1 blockers CLEARED, CenterPoint imported
- `master-orchestration.md` - Full CLI arsenal, delegation patterns, swarm protocols, brain protocol
- `sprint-2026-02-18.md` - Enterprise sprint: per-system status details, milestones
- `learned-patterns.md` - All gotchas, patterns, and hard-won debugging knowledge

## ORCHESTRATION ARSENAL (all subscription-based, zero per-use costs)
| CLI | Model | Version | Skills | Launch |
|-----|-------|---------|--------|--------|
| Claude Code | Opus 4.6 | 2.1.49 | 23 skills, 6 agents, 6 hooks, 10 plugins | `claude` |
| Gemini | gemini-3-pro-preview | 0.29.5 | 8 skills, 9 extensions, 19 personas | `gemini --yolo` |
| Codex | gpt-5.3-codex | 0.104.0 | 21 skills, 3 MCP servers, AGENTS.md | `codex exec --full-auto` |
| Perplexity | sonar-pro | 1.0.0 | 8 models | `perplexity-cli` |
| Brain | N/A (25 modules) | 1.0.0 | 59 agents, PM system | `brain [cmd]` |

## SYSTEM ARCHITECTURE - ALL 10 DEPLOYED SYSTEMS
| System | Path | Deploy | Platform | ID |
|--------|------|--------|----------|----|
| BrainOps Agents | `~/dev/brainops-ai-agents` | Docker Hub | Render | srv-d413iu75r7bs738btc10 |
| BrainOps Backend | `~/dev/myroofgenius-backend` | Docker Hub | Render | srv-d1tfs4idbo4c73di6k00 |
| MCP Bridge | `~/dev/mcp-bridge` | Node runtime | Render | srv-d4rhvg63jp1c73918770 |
| Weathercraft ERP | `~/dev/weathercraft-erp` | Git push | Vercel | prj_zNkdH7BkxKncNCzObrZL1clmmqA4 |
| MyRoofGenius | `~/dev/myroofgenius-app` | Git push | Vercel | prj_FbvVmGXohSYVD73zXKbzTmvgwP98 |
| Command Center | `~/dev/brainops-command-center` | Git push | Vercel | prj_xTUttLciTbwGZLkwbIYBwKwBrkjO |
| Weathercraft Guardian | `~/dev/weathercraft-guardian` | Git push | Vercel | prj_ZBachqpu96N2tNaamzB1RUEYbxB7 |
| BrainStack Studio | `~/dev/brainstack-studio` | Git push | Vercel | prj_Vp6fcVudLNJQv8FAln0qg9LFZDUa |
| Vaulted Slabs | `~/dev/vaulted-slabs-marketplace` | Git push | Vercel | prj_JXdfQBT0jrKw2rmzmRqgt998E8It |
| WC-Share | `~/dev/wc-share` | Git push | Vercel | prj_mnMNmaOjzLswDFrz6LiyZY6IBxow |

## REVENUE STATUS: $0 TOTAL (as of 2026-02-10)
- Revenue pipeline UNBLOCKED. Needs: CUSTOMER ACQUISITION (traffic is the bottleneck).

## MATT'S EMAIL ADDRESSES + ROUTING (CRITICAL)
- **mwwoodworth@gmail.com** — primary personal, ALERT_EMAIL default
- **matthew@brainstackstudio.com** — BrainStack business
- **matthew@weathercraft.net** — Weathercraft business (WC daily reports + campaign notifications ONLY)
- RESEND_FROM_EMAIL: `BrainOps AI <ops@myroofgenius.com>` (myroofgenius.com domain verified)
- WRONG: matt@weathercraft.com, invoices@myroofgenius.com, admin@brainops.com, alerts@brainops.com

## OPERATIONAL ESSENTIALS
- **Credentials**: `source ~/dev/_secure/BrainOps.env` (use Python extraction for `\n` keys)
- **Quality Gates**: `npm run build && npm run typecheck:full && npm run lint`
- **Deploy Render**: Docker build -> push -> curl API. NEVER git push.
- **Deploy Vercel**: Git push to main. NEVER `vercel --prod` CLI.
- **Database**: PG {{PG_VERSION}}. ALWAYS query live — numbers change constantly.
- **Render Env**: 185 shared vars. Zero localhost/placeholder issues.
- **Truth System**: Run `scripts/truth/snapshot.sh` for live state. MEMORY.md is auto-generated.

## DATABASE STATE (PG {{PG_VERSION}}) — LIVE {{SNAPSHOT_DATE}}
{{DB_STATE_BLOCK}}

## REMAINING ISSUES
{{REMAINING_ISSUES_BLOCK}}

## DB BLAST-RADIUS CAP — ALL 3 SERVICES RESTRICTED
- agent_worker/backend_worker/mcp_worker: restricted roles, NOBYPASSRLS
- Docker AI Agents: {{AGENTS_VERSION}}. Docker Backend: v{{BACKEND_VERSION}}.
- TenantScopedPool: SET LOCAL app.current_tenant_id in EVERY transaction

## INVARIANT ENGINE (LIVE) — {{SNAPSHOT_DATE}}
{{INVARIANT_BLOCK}}

## PER-SYSTEM STATUS ({{SNAPSHOT_DATE}})
{{SERVICE_STATUS_BLOCK}}

## KEY LEARNED PATTERNS (see learned-patterns.md for complete list)
- Render deploys via Docker Hub, NOT git push. Vercel via git push to main.
- BrainOps.env had literal `\n` on some keys — use Python extraction.
- current_tenant_id() MUST be plpgsql with BEGIN..EXCEPTION
- asyncpg set_config: MUST use false (session-level), NOT true (transaction-local)
- agent_worker: NOBYPASSRLS, 203+ tables INSERT/UPDATE, 0 DELETE/DDL
- Claude Code hooks: NEVER register same hook at both global AND project level — they fire TWICE
- Codex MCP postgres: use bash -c wrapper with $DATABASE_URL, NEVER hardcode connection strings
- Alert INSERT path is in myroofgenius-backend, NOT brainops-ai-agents
- MEMORY.md is auto-generated by `scripts/truth/generate-memory.sh` — do NOT hand-edit metrics

## ACCEPTED ITEMS (by design)
- spatial_ref_sys: no RLS (PostGIS static lookup). System tables without RLS (expected).

## PERFECTION PROGRAM STATUS
{{PERFECTION_BLOCK}}

<!-- TRUTH_HASH: {{TRUTH_HASH}} -->
